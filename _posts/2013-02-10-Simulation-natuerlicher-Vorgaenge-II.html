---
layout: post
description: "Beispiele für die computergestützte Simulation natürlicher Vorgänge"
title: "Simulation natürlicher Vorgänge - Fluid-Resistance"
---

<p>Ende letzten Jahres habe ich mich ein wenig mit dem Buch <a href="http://natureofcode.com/book">The Nature of Code</a> 
von Daniel Shiffman beschäftigt und einige der Processing-Beispiele nach Clojure übersetzt. Dabei habe ich die Library
<a href="https://github.com/quil/quil">Quil</a> von Sam Aaron verwendet. Quil ist ein in Clojure programmierter Wrapper für
Java-based Processing und macht das Programmieren von <a href="processing.org">Processing</a> in pure Clojure möglich.</p>

<p>Ich habe ca. zehn der codierten Beispiele in Clojure implementiert und will in separaten Posts zwei oder drei davon vorstellen. 
Hier das erste Beispiel:</p>   

<h2>Fluid Resistance</h2>

<p>Das Beispiel <em>Fluid Resistance</em> ist aus dem <a href="http://natureofcode.com/book/chapter-2-forces">Kapitel 2 - Forces</a> und 
veranschaulicht die kombinierte Wirkung von Schwerkraft und Fluid Resistance auf Körper mit unterschiedlicher Masse. 
Hier ein Screencast:</p> 

<video controls="controls">
	  <source src="/videos/fluidresistance.mp4" type="video/mp4" />
  <source src="/videos/fluidresistance.ogv" type="video/ogg" />
  Video not playing? <a href="/videos/fluideresistance.ogv">Download file</a> instead.
</video> 

<p/>

<p>Das Programm besteht aus 3 Hauptteilen: <em>Mover</em>, <em>Fluid</em> und <em>Processing-Main</em>. Es werden Clojure Protocols zur Formulierung 
der Abstraktionen verwendet.</p>

<p>Die Datenstruktur <code>Mover</code> repräsentiert ein im 2D-Raum bewegbares Objekt. Für <code>Mover</code> sind die Abstraktionen 
<code>Mobile</code>, <code>Massive</code> und <code>Drawable</code> implementiert.</p>  

<script src="https://gist.github.com/dokuryoku/4966943.js?file=mover.clj"></script>

<p>Die Datenstruktur <code>Fluid</code> repräsentiert eine im 2D-Raum statisch platzierte Flüssigkeit. Für <code>Fluid</code> sind
die Abstraktionen <code>Permeable</code> und <code>Drawable</code> implementiert.</p>

<script src="https://gist.github.com/dokuryoku/4966943.js?file=fluid.clj"></script>

<p>Processing-Main definiert die Sketch-Paramameter und den Sketch-State (<code>view-model</code>) sowie die Fortschreibung 
des State im Draw-Loop. Außerdem sind im Processing-Main die durch Quil/Processing via Callback aufgerufenen Funktionen für 
das Setup, den Draw-Loop und den Maushandler implementiert.</p>

<script src="https://gist.github.com/dokuryoku/4966943.js?file=main.clj"></script>

<p>TODO: Hier fehlen ein paar Sätze zu den Design-Entscheidungen, die getroffen wurden.</p>


<p>Wie testet man sowas ? ... blah blah ...</p>

<script src="https://gist.github.com/dokuryoku/4966943.js?file=test-helpers.clj"></script>

<script src="https://gist.github.com/dokuryoku/4966943.js?file=fluid-tests.clj"></script>

<script src="https://gist.github.com/dokuryoku/4966943.js?file=mover-tests.clj"></script>

<h2>Links</h2>

<ul>
<li>Link zum kompletten <a href="https://gist.github.com/dokuryoku/4966943#file-_fluidresistance-clj">Code</a> des Beispiels</li>
<li>Link zum <a href="https://github.com/shiffman/The-Nature-of-Code-Examples/tree/master/Processing/chp2_forces/NOC_2_5_fluidresistance">Code</a> der Javascript-Implentierung aus dem Buch</li>
<li>Link zum Buch <a href="http://natureofcode.com/book">The Nature of Code</a></li>
<li>Es gibt eine Videoserie zu The Nature of Code <a href="http://vimeo.com/channels/464686">http://vimeo.com/channels/464686</a></li>
</ul>